#include <stdlib.h>
#include <stdio.h>

#include <unistd.h>
#include <fcntl.h>
#include <string.h>

#include <sys/wait.h>
#include <sys/stat.h>
#include <sys/types.h>

#include <errno.h>

#define SIZE_BUF 256

int main(int argc, char const *argv[]) {
  const char *msg_write = "KODO DIO DA !!!!!!!!";
  const char *name_pipe = "tube-test";

  int fd = -1;

  printf("Message send\n");
  if( mkfifo(name_pipe, 0666)  ==  -1 ) {
    perror("Error with 'mkfifo()' in write_pipe.c");
    return errno;
  }

  if( ( fd = open(name_pipe, O_WRONLY) )  ==  -1 ) {
    perror("Error with 'open()' in write_pipe.c");
    return errno;
  }

  if( write(fd, msg_write, strlen(msg_write))  ==  -1 ) {
    perror("Error with 'write()' in write_pipe.c");
    return errno;
  }

  close(fd);

  return 0;
}
