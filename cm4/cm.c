#include "stdlib.h"
#include "stdio.h"

#include "unistd.h"

#include "sys/types.h"
#include "sys/wait.h"

void create_tree_proc(const int i_floors, const int num_floors) {
  pid_t p; int status;
  if(i_floors  ==  num_floors) {
    printf("%d\n", getpid());
    exit(0);
  }

  p = fork();
  if(!p) {  // Child execution
    create_tree_proc(i_floors + 1, num_floors);
    exit(0);
  }
  else {  // Father execution
    wait(&status);
    wait(&status);
  }

  printf("%d\n", getpid());

  p = fork();
  if(!p) {
    create_tree_proc(i_floors + 1, num_floors);
    exit(0);
  }
  else {
    wait(&status);
    wait(&status);
  }
}

int main(int argc, char const *argv[])
{
  create_tree_proc(3, 0);
  return 0;
}
