#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>

//
typedef struct thread_arg_s {

  //Thread ID
  pthread_t tid;

  //Thread argument/parameter
  int targ;

  //Thread return value
  int tret;
  
} thread_arg_t;

//Thread
void *trand(void *arg)
{
  //Type cast the argument 
  thread_arg_t *a = (thread_arg_t *)arg;

  //Set return value
  a->tret = rand() % a->targ;
  
  //
  printf("Random number: %d\n", a->tret);
  
  //
  pthread_exit(NULL);
}

//
int main()
{
  thread_arg_t ta;

  //
  ta.targ = 10;
  ta.tret =  0;
  
  //
  srand(getpid());

  pthread_create(&ta.tid, NULL, trand, &ta);

  pthread_join(ta.tid, NULL);
  
  printf("Returned value: %d\n", ta.tret);
  
  return 0;
}
